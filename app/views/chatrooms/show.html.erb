<%= render 'shared/logo-login-purple' %>
<div class="main-container chat-container">
  <h3 class="chat-header mt-2 d-flex">
    <%= link_to chatrooms_path do %>
      <div class="chat-back-button"><i class="fas fa-chevron-left"></i></div>
    <% end %>
    <span class="chat-title"><%= @event.title  %></span>
  </h3>

  <div id="messages" data-chatroom-id="<%= @chatroom.id %>">
    <% @chatroom.messages.each do |message| %>
      <% if message.user == current_user %>
        <div class="message-container-current-user" id="message-<%= message.id %>">
          <i class="author">
            <span><%= message.user.first_name %></span>
            <small><%= message.created_at.strftime("%a %b %e at %l:%M%p") %></small>
          </i>
          <p><%= message.content %></p>
        </div>
        <!-- <hr> -->
      <% else %>
        <div class="message-container-other-user" id="message-<%= message.id %>">
          <i class="author">
            <span><%= message.user.first_name %></span>
            <small><%= message.created_at.strftime("%a %b %e at %l:%M%p") %></small>
          </i>
          <p><%= message.content %></p>
        </div>
        <!-- <hr> -->
      <% end %>
    <% end %>
  </div>

  <div class="chatroom-input mb-5">
    <%= simple_form_for [ @chatroom, @message ], remote: true do |f| %>
      <%= f.input :content, label: false, placeholder: "Message ##{@event.title}", input_html: {class: "sticky-message"} %>
    <% end %>
  </div>
</div>
